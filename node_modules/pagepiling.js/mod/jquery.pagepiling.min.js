/**
 * pagepiling.js 1.5.1 (customized)
 *
 * https://github.com/alvarotrigo/pagePiling.js
 * MIT licensed
 *
 * Copyright (C) 2013 alvarotrigo.com - A project by Alvaro Trigo
 */
(function(b,h,k,y){b.fn.pagepiling=function(L){function M(a){var g=b(".pp-section.active").index(".pp-section");a=a.index(".pp-section");return g>a?"up":"down"}function l(a,g){var d={destination:a,animated:g,activeSection:b(".pp-section.active"),anchorLink:a.data("anchor"),sectionIndex:a.index(".pp-section"),toMove:a,yMovement:M(a),leavingSection:b(".pp-section.active").index(".pp-section")+1};if(!d.activeSection.is(a)){"undefined"===typeof d.animated&&(d.animated=!0);"undefined"!==typeof d.anchorLink&&
N(d.anchorLink,d.sectionIndex);d.destination.addClass("active").siblings().removeClass("active");d.sectionsToMove=O(d);if("down"===d.yMovement){var e;e="vertical"!==c.direction?"translate3d(-100%, 0px, 0px)":"translate3d(0px, -100%, 0px)";d.translate3d=e;d.scrolling="-100%";c.css3||d.sectionsToMove.each(function(a){a!=d.activeSection.index(".pp-section")&&b(this).css(u(d.scrolling))});d.animateSection=d.activeSection}else d.translate3d="translate3d(0px, 0px, 0px)",d.scrolling="0",d.animateSection=
a;b.isFunction(c.onLeave)&&c.onLeave.call(this,d.leavingSection,d.sectionIndex+1,d.yMovement);P(d);Q(d.anchorLink);R(d.anchorLink,d.sectionIndex);z=d.anchorLink;A=(new Date).getTime()}}function B(){return 4==b(".pp-section").length&&4==b("h1").length}function P(a){c.css3?(C(a.animateSection,a.translate3d,a.animated),a.sectionsToMove.each(function(){C(b(this),a.translate3d,a.animated)}),setTimeout(function(){v(a)},c.scrollingSpeed)):(a.scrollOptions=u(a.scrolling),a.animated?a.animateSection.animate(a.scrollOptions,
c.scrollingSpeed,c.easing,function(){D(a);v(a)}):(a.animateSection.css(u(a.scrolling)),setTimeout(function(){D(a);v(a)},400)))}function v(a){b.isFunction(c.afterLoad)&&c.afterLoad.call(this,a.anchorLink,a.sectionIndex+1)}function O(a){return"down"===a.yMovement?b(".pp-section").map(function(g){if(g<a.destination.index(".pp-section"))return b(this)}):b(".pp-section").map(function(g){if(g>a.destination.index(".pp-section"))return b(this)})}function D(a){"up"===a.yMovement&&a.sectionsToMove.each(function(g){b(this).css(u(a.scrolling))})}
function u(a){return"vertical"===c.direction?{top:a}:{left:a}}function N(a,b){c.anchors.length?(location.hash=a,E(location.hash)):E(String(b))}function E(a){a=a.replace("#","");b("body")[0].className=b("body")[0].className.replace(/\b\s?pp-viewing-[^\s]+\b/g,"");b("body").addClass("pp-viewing-"+a)}function w(){return(new Date).getTime()-A<600+c.scrollingSpeed?!0:!1}function F(){var a=k.location.hash.replace("#","").split("/")[0];a.length&&a&&a!==z&&(a=isNaN(a)?b('[data-anchor="'+a+'"]'):b(".pp-section").eq(a-
1),l(a))}function C(a,b,c){a.toggleClass("pp-easing",c);a.css({"-webkit-transform":b,"-moz-transform":b,"-ms-transform":b,transform:b})}function m(a){if(!w()){a=k.event||a;a=Math.max(-1,Math.min(1,a.wheelDelta||-a.deltaY||-a.detail));var c=b(".pp-section.active").filter(".pp-scrollable");0>a?n("down",c):n("up",c);return!1}}function n(a,b){var c,f;"down"==a?(c="bottom",f=e.moveSectionDown):(c="top",f=e.moveSectionUp);if(0<b.length)if(c="top"===c?!b.scrollTop():"bottom"===c?b.scrollTop()+1+b.innerHeight()>=
b[0].scrollHeight:void 0,c)f();else return!0;else f()}function G(){return k.PointerEvent?{down:"pointerdown",move:"pointermove",up:"pointerup"}:{down:"MSPointerDown",move:"MSPointerMove",up:"MSPointerUp"}}function H(a){var b=[];b.y="undefined"!==typeof a.pageY&&(a.pageY||a.pageX)?a.pageY:a.touches[0].pageY;b.x="undefined"!==typeof a.pageX&&(a.pageY||a.pageX)?a.pageX:a.touches[0].pageX;return b}function I(a){return"undefined"===typeof a.pointerType||"mouse"!=a.pointerType}function S(a){a=a.originalEvent;
I(a)&&(a=H(a),p=a.y,q=a.x)}function T(a){var g=a.originalEvent;if(!J(a.target)&&I(g)){var d=b(".pp-section.active").filter(".pp-scrollable");d.length||a.preventDefault();w()||(a=H(g),r=a.y,t=a.x,"horizontal"===c.direction&&Math.abs(q-t)>Math.abs(p-r)?Math.abs(q-t)>f.width()/100*c.touchSensitivity&&(q>t?n("down",d):t>q&&n("up",d)):Math.abs(p-r)>f.height()/100*c.touchSensitivity&&(p>r?n("down",d):r>p&&n("up",d)))}}function J(a,g){g=g||0;var d=b(a).parent();return g<c.normalScrollElementTouchThreshold&&
d.is(c.normalScrollElements)?!0:g==c.normalScrollElementTouchThreshold?!1:J(d,++g)}function U(){b("body").append('<div id="pp-nav"><ul></ul></div>');var a=b("#pp-nav");a.css("color",c.navigation.textColor);a.addClass(c.navigation.position);for(var g=0;g<b(".pp-section").length;g++){var d="";c.anchors.length&&(d=c.anchors[g]);if("undefined"!==c.navigation.tooltips){var e=c.navigation.tooltips[g];"undefined"===typeof e&&(e="")}a.find("ul").append('<li data-tooltip="'+e+'"><a href="#'+d+'"><span></span></a></li>')}a.find("span").css("border-color",
c.navigation.bulletsColor)}function R(a,g){c.navigation&&(b("#pp-nav").find(".active").removeClass("active"),a?b("#pp-nav").find('a[href="#'+a+'"]').addClass("active"):b("#pp-nav").find("li").eq(g).find("a").addClass("active"))}function Q(a){c.menu&&(b(c.menu).find(".active").removeClass("active"),b(c.menu).find('[data-menuanchor="'+a+'"]').addClass("active"))}function V(){var a=h.createElement("p"),b,c={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",
transform:"transform"};h.body.insertBefore(a,null);for(var e in c)a.style[e]!==y&&(a.style[e]="translate3d(1px,1px,1px)",b=k.getComputedStyle(a).getPropertyValue(c[e]));h.body.removeChild(a);return b!==y&&0<b.length&&"none"!==b}function W(){17===b("li").length&&B()&&(b("html,body").css({overflow:"visible",height:"initial"}),b("#pp-nav").remove(),b(".pp-section").css({height:"","background-color":"",padding:"","z-index":"auto"}),f.css({height:"",position:"","-ms-touch-action":"","touch-action":""}),
b(".pp-section").each(function(){b(this).removeData("index").removeAttr("style").removeData("index").removeAttr("data-index").removeData("anchor").removeAttr("data-anchor").removeClass("pp-table  active pp-easing pp-section")}),c.menu&&(b(c.menu).find("[data-menuanchor]").removeClass("active"),b(c.menu).find("[data-menuanchor]").removeData("menuanchor")),b("body")[0].className=b("body")[0].className.replace(/\b\s?pp-viewing-[^\s]+\b/g,""),f.find(".pp-tableCell").each(function(){b(this).replaceWith(this.childNodes)}))}
var e=b.fn.pagepiling,f=b(this),z,A=0,K="ontouchstart"in k||0<navigator.msMaxTouchPoints||navigator.maxTouchPoints,p=0,q=0,r=0,t=0,c=b.extend(!0,{direction:"vertical",menu:null,verticalCentered:!0,sectionsColor:[],anchors:[],scrollingSpeed:700,easing:"easeInQuart",loopBottom:!1,loopTop:!1,css3:!0,navigation:{textColor:"#000",bulletsColor:"#000",position:"right",tooltips:[]},normalScrollElements:null,normalScrollElementTouchThreshold:5,touchSensitivity:5,keyboardScrolling:!0,sectionSelector:".section",
animateAnchor:!1,afterLoad:null,onLeave:null,afterRender:null},L);b.extend(b.easing,{easeInQuart:function(a,b,c,e,f){return e*(b/=f)*b*b*b+c}});e.setScrollingSpeed=function(a){c.scrollingSpeed=a};e.setMouseWheelScrolling=function(a){a?f.get(0).addEventListener?(f.get(0).addEventListener("mousewheel",m,!1),f.get(0).addEventListener("wheel",m,!1)):f.get(0).attachEvent("onmousewheel",m):f.get(0).addEventListener?(f.get(0).removeEventListener("mousewheel",m,!1),f.get(0).removeEventListener("wheel",m,
!1)):f.get(0).detachEvent("onmousewheel",m)};e.setAllowScrolling=function(a){a?(e.setMouseWheelScrolling(!0),K&&(a=G(),f.off("touchstart "+a.down).on("touchstart "+a.down,S),f.off("touchmove "+a.move).on("touchmove "+a.move,T))):(e.setMouseWheelScrolling(!1),K&&(a=G(),f.off("touchstart "+a.down),f.off("touchmove "+a.move)))};e.setKeyboardScrolling=function(a){c.keyboardScrolling=a};e.moveSectionUp=function(){var a=b(".pp-section.active").prev(".pp-section");!a.length&&c.loopTop&&(a=b(".pp-section").last());
a.length&&l(a)};e.moveSectionDown=function(){var a=b(".pp-section.active").next(".pp-section");!a.length&&c.loopBottom&&(a=b(".pp-section").first());a.length&&l(a)};e.moveTo=function(a){var c="",c=isNaN(a)?b('[data-anchor="'+a+'"]'):b(".pp-section").eq(a-1);0<c.length&&l(c)};b(c.sectionSelector).each(function(){b(this).addClass("pp-section")});c.css3&&(c.css3=V());f.removeClass("pp-destroyed");b(f).css({overflow:"hidden","-ms-touch-action":"none","touch-action":"none"});e.setAllowScrolling(!0);b.isEmptyObject(c.navigation)||
U();var x=b(".pp-section").length;17==b("li").length&B()&&b(".pp-section").each(function(a){b(this).data("data-index",a);b(this).css("z-index",x);a||0!==b(".pp-section.active").length||b(this).addClass("active");"undefined"!==typeof c.anchors[a]&&b(this).attr("data-anchor",c.anchors[a]);"undefined"!==typeof c.sectionsColor[a]&&b(this).css("background-color",c.sectionsColor[a]);c.verticalCentered&&!b(this).hasClass("pp-scrollable")&&b(this).addClass("pp-table").wrapInner('<div class="pp-tableCell" style="height:100%" />');
--x}).promise().done(function(){c.navigation&&(b("#pp-nav").css("margin-top","-"+b("#pp-nav").height()/2+"px"),b("#pp-nav").find("li").eq(b(".pp-section.active").index(".pp-section")).find("a").addClass("active"));b(k).on("load",function(){var a=k.location.hash.replace("#",""),a=b('.pp-section[data-anchor="'+a+'"]');0<a.length&&l(a,c.animateAnchor)});b.isFunction(c.afterRender)&&c.afterRender.call(this)});b(k).on("hashchange",F);b(h).keydown(function(a){if(c.keyboardScrolling&&!w())switch(a.which){case 38:case 33:e.moveSectionUp();
break;case 40:case 34:e.moveSectionDown();break;case 36:e.moveTo(1);break;case 35:e.moveTo(b(".pp-section").length);break;case 37:e.moveSectionUp();break;case 39:e.moveSectionDown()}});c.normalScrollElements&&(b(h).on("mouseenter",c.normalScrollElements,function(){e.setMouseWheelScrolling(!1)}),b(h).on("mouseleave",c.normalScrollElements,function(){e.setMouseWheelScrolling(!0)}));b(h).on("click touchstart","#pp-nav a",function(a){a.preventDefault();a=b(this).parent().index();l(b(".pp-section").eq(a))});
b(h).on({mouseenter:function(){var a=b(this).data("tooltip");b('<div class="pp-tooltip '+c.navigation.position+'">'+a+"</div>").hide().appendTo(b(this)).fadeIn(200)},mouseleave:function(){b(this).find(".pp-tooltip").fadeOut(200,function(){b(this).remove()})}},"#pp-nav li");e.destroy=function(a){e.setMouseWheelScrolling(!1);e.setKeyboardScrolling(!1);f.addClass("pp-destroyed");b(k).off("hashchange",F);b(h).off("click","#pp-nav a").off("mouseenter",c.normalScrollElements).off("mouseleave",c.normalScrollElements);
a&&W()}}})(jQuery,document,window);